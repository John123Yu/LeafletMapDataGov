<!DOCTYPE html>
<html>
<head>
	<title>Data.gov Map of Open Government Websites</title>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
	<!-- <link href='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.css' rel='stylesheet' /> -->
	<script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
	<!-- <script src='https://api.mapbox.com/mapbox-gl-js/v0.34.0/mapbox-gl.js'></script> -->
	<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script>
	<style type="text/css">
		#mapid { 
			height: 650px; 
			width: 990px;
			border: 1px solid #333333;
		}
		.leaflet-popup-content {
			font-weight: bold;
			line-height: 1.5em;
		}
	</style>
</head>
<body>
	<div id="mapid"></div>
</body>
<script type="text/javascript">
	var mymap = L.map('mapid').setView([30.505, -36], 2.5);
	var international, state, local;
	// var mymap = L.map('mapid').setView([30.505, -36], 2.5);
	var myStyle = {
	    "color": "black",
	    "weight": 1,
	    "opacity": 0.8,
	    'fillColor': '#4679B2',
	    'fillOpacity': 0.7
	};
	var geoDatas = [{international: "https://rawgit.com/John123Yu/LeafletMapDataGov/master/international.geojson"}, {state: 'https://rawgit.com/John123Yu/LeafletMapDataGov/master/us_states.geojson'}, {local: 'https://rawgit.com/John123Yu/LeafletMapDataGov/master/us_cities_counties.geojson'}]

	var layer = new L.StamenTileLayer("toner-lite");
	mymap.addLayer(layer);
	// L.tileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
	//     attribution: '',
	//     maxZoom: 10,
	//     id: 'your.mapbox.project.id',
	//     accessToken: 'pk.eyJ1Ijoiam9objEyM3l1IiwiYSI6ImNqMWRzbTYwbjAwMGsyd2tlbzE4eDVrNnkifQ.CUa8KEpHJAgVHKOADdQaVQ'
	// }).addTo(mymap);
	$.ajax({
		dataType: "json",
		url: "https://rawgit.com/John123Yu/LeafletMapDataGov/master/international.geojson",
		success: function(data) {
		    international = L.geoJSON(data, {
			    style: myStyle,
			    onEachFeature: function(feature, layer) {
				    layer.on({
				    	contextmenu: function(e){
				    		var popup = L.popup().setLatLng(e.latlng).setContent(feature.properties.Item  + "<br> Link: " + feature.properties.Link)
						    popup.openOn(mymap);
						},
	                    mouseover: function(e) {
	                    	layer.setStyle({
					            fillColor: 'orange',
					            fillOpacity: 0.6
					        })
	                    },
	                    mouseout: function (e) {
	                    	layer.setStyle({
					            fillColor: '#4679B2',
					            fillOpacity: 0.7
					        })
				        },
	                    click: function (e) {
				            window.open(feature.properties.Link,'_blank');
				        }
	                });
				}
			})
		}
	})

	$.ajax({
		dataType: "json",
		url: "https://rawgit.com/John123Yu/LeafletMapDataGov/master/us_states.geojson",
		success: function(data) {
		    state = L.geoJSON(data, {
			    style: myStyle,
			    onEachFeature: function(feature, layer) {
				    layer.on({
				    	contextmenu: function(e){
				    		var popup = L.popup().setLatLng(e.latlng).setContent(feature.properties.Item  + "<br> Link: " + feature.properties.Link)
						    popup.openOn(mymap);
						},
	                    mouseover: function(e) {
	                    	layer.setStyle({
					            fillColor: 'orange',
					            fillOpacity: 0.6
					        })
	                    },
	                    mouseout: function (e) {
	                    	layer.setStyle({
					            fillColor: '#4679B2',
					            fillOpacity: 0.7
					        })
				        },
	                    click: function (e) {
				            window.open(feature.properties.Link,'_blank');
				        }
	                });
				}
			})
		}
	})

	$.ajax({
		dataType: "json",
		url: "https://rawgit.com/John123Yu/LeafletMapDataGov/master/us_cities_counties.geojson",
		success: function(data) {
		    local = L.geoJSON(data, {
			    style: myStyle,
			    onEachFeature: function(feature, layer) {
				    layer.on({
				    	contextmenu: function(e){
				    		var popup = L.popup().setLatLng(e.latlng).setContent(feature.properties.Item  + "<br> Link: " + feature.properties.Link)
						    popup.openOn(mymap);
						},
	                    mouseover: function(e) {
	                    	layer.setStyle({
					            fillColor: 'orange',
					            fillOpacity: 0.6
					        })
	                    },
	                    mouseout: function (e) {
	                    	layer.setStyle({
					            fillColor: '#4679B2',
					            fillOpacity: 0.7
					        })
				        },
	                    click: function (e) {
				            window.open(feature.properties.Link,'_blank');
				        }
	                });
				}
			})
			// var baseMaps = {
			//     "world": layer,
			// };
			// var overlayMaps = {
			//     "International": international,
			//     "State": state,
			//     "US Cities and Counties": local
			// };
			// L.control.layers(baseMaps, overlayMaps).addTo(mymap);
		}
	})	
	setTimeout(function(){
		var baseMaps = {
		    "world": layer,
		};
		console.log("International", international)
		console.log("state", state)
		console.log("local", local)
		var overlayMaps = {
		    "International": international,
		    "State": state,
		    "US Cities and Counties": local
		};
		L.control.layers(baseMaps, overlayMaps).addTo(mymap);
	 }, 500);	
</script>
</html>